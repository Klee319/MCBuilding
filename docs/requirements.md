# Minecraft建築データ共有SNS 要件定義書 v1.0

## 1. 概要

### 何のためのプロダクトか
マインクラフトの建築作品を、エディション（Java版/統合版）やバージョンの壁を越えて
共有・発見・再利用できるプラットフォーム。

### 何が嬉しいか
- Java版で作った城を統合版の友人がそのまま使える
- 建築作品を3Dプレビューで魅せられる（埋もれない）
- 欲しいバージョン向けに自動変換されたデータをすぐ使える
- 好きなビルダーの新作を追える

### 解決する課題
1. Java版ユーザーが統合版の友人と建築を共有できない
2. 建築作品を見せる場所がなく埋もれてしまう
3. ダウンロードした建築が自分のバージョンで動かない

---

## 2. 想定ユーザー（ペルソナ）

| ペルソナ | 説明 | 主な行動 |
|---------|------|----------|
| 建築ビルダー | 自作の建築を公開して評価されたい。Java/統合版どちらも使う | アップロード、いいね確認、コメント返信 |
| 建築コレクター | 良い建築を探してダウンロードし、自分のワールドで使いたい | 検索、ダウンロード、フォロー |
| カジュアル閲覧者 | 見るだけ。気に入ったらいいね。最初はアカウント登録せず眺める | 閲覧、いいね |

---

## 3. ユースケース一覧

### 建築データ操作
- UC-01: 建築データをアップロードする
- UC-02: アップロード時に自動でJava↔統合版変換する
- UC-03: 投稿ページで建築を3Dプレビューする（回転・ズーム）
- UC-04: 3Dプレビューに自分のリソースパックを適用する
- UC-05: 建築データをダウンロードする（希望エディション/バージョン選択）
- UC-06: 自分の投稿を編集・削除する
- UC-07: 投稿の公開設定を変更する（公開/非公開/限定公開）

### ソーシャル機能
- UC-08: いいねを押す
- UC-09: コメントを投稿する
- UC-10: コメントに返信する（スレッド）
- UC-11: 他ユーザーをフォローする
- UC-12: 通知を受け取る
- UC-13: 不適切な投稿・コメントを通報する

### アカウント・プロフィール
- UC-14: アカウント登録する（メール）
- UC-15: 電話番号認証する
- UC-16: SNS連携する（X/Instagram）
- UC-17: プロフィールを編集する
- UC-18: 代表作をピン留めする

### 検索・発見
- UC-19: 建築を検索・フィルタする
- UC-20: 建築を外部サイトに埋め込む

---

## 4. 主要ユーザーフロー（攻略本形式）

### 4.1 はじめて使う（閲覧者）
1. トップページにアクセス → 人気の建築一覧が表示される
2. 気になる建築をタップ → 3Dプレビューが表示される
3. ぐりぐり回転させて確認
4. 「ダウンロード」ボタンを押す → **アカウント登録を求められる**
5. メールアドレスで登録 → エディション/バージョン選択 → ダウンロード

### 4.2 はじめて使う（投稿者）
1. 「アップロード」ボタンをタップ → ログイン/登録を求められる
2. メールアドレスで登録
3. ファイル選択（.schematic / .litematic / .mcstructure、100MBまで）
4. 自動判定 → 対応形式ならOK、非対応ならエラー
5. 入力項目：
   - タイトル（必須、50文字以内）
   - 説明文（任意、2000文字以内）
   - タグ（任意、10個まで）
   - 前提MOD名（MODブロック使用時、任意）
   - 公開設定（公開/非公開/限定公開）
   - 限定公開の場合：有効期限（無期限/1日/1週間/1ヶ月/カスタム）
6. プレビュー確認 → 公開（または下書き保存）

### 4.3 リソースパックを適用して見る
1. 投稿ページの3Dプレビューを表示
2. 「リソースパック適用」ボタンをタップ
3. 自分のリソパファイル（zip）を選択、またはURL指定
4. バニラブロックのテクスチャが置き換わる
5. ※MODブロックはデフォルト表示のまま（リソパ適用対象外）

### 4.4 限定公開で友人に共有する
1. 投稿作成時 or 編集時に「限定公開」を選択
2. 有効期限を選択（無期限/1日/1週間/1ヶ月/カスタム日時）
3. 共有用URLが発行される
4. URLを知っている人だけがアクセス可能
5. 検索結果・一覧には表示されない
6. 期限切れ後はアクセス不可（投稿者は再発行可能）

### 4.5 代表作をピン留めする
1. プロフィールページ → 「代表作を設定」
2. 自分の投稿一覧から最大3つ選択
3. プロフィール上部に代表作として表示される

### 4.6 コメントに返信する
1. 投稿ページのコメント欄を開く
2. 既存コメントの「返信」ボタンをタップ
3. 返信を入力 → 投稿
4. 元コメントの下にスレッド形式で表示される
5. 元コメント投稿者に通知が届く

### 4.7 通常利用（リピーター）
1. ログイン状態でアクセス
2. フォロー中のビルダーの新着 or 人気タブを見る
3. いいね/コメント/ダウンロード

### 4.8 失敗したとき

| 状況 | 表示 | 次のアクション |
|------|------|---------------|
| 非対応ファイル | 「対応形式は .schematic / .litematic / .mcstructure です」 | 正しいファイルを選び直す |
| ファイルサイズ超過 | 「ファイルサイズが上限（100MB）を超えています」 | ファイルを軽量化して再アップ |
| 変換で一部ブロック欠落 | 「一部ブロックが変換できませんでした（空気ブロックに置換）」＋置き換えリスト | 確認して公開 or キャンセル |
| レンダリング重い | 「簡易表示モードに切り替えますか？」 | 簡易モード or そのまま待つ |
| MODブロック含む | 「MODブロックが含まれています。前提MOD名を入力してください」 | MOD名入力して続行 |
| 限定公開URL期限切れ | 「このリンクは有効期限が切れています」 | 投稿者に再発行を依頼 |

### 4.9 やり直し
- **投稿編集**: 投稿ページ → 「編集」→ タイトル/説明/タグ/公開設定変更 → 保存
- **投稿削除**: 「削除」→ 確認ダイアログ → 完全削除（復元不可）
- **コメント削除**: 自分のコメント → 「削除」→ 確認 → 削除（返信は残る）
- **アカウント削除**: 設定 → アカウント削除 → 確認 → 投稿も全削除

---

## 5. 機能要件

### Must（必須）

| 機能 | ユーザー操作 | 画面/入力 | 結果 | エラー時 |
|------|-------------|-----------|------|----------|
| アップロード | ファイル選択 | .schematic/.litematic/.mcstructure（100MBまで） | 投稿作成 | 非対応形式/サイズ超過エラー |
| 自動変換 | なし（自動） | - | Java↔統合版データ生成（1.12〜最新対応） | 変換失敗ブロック→空気化＋リスト表示 |
| 3Dプレビュー | ドラッグ/ピンチ | 投稿ページ | 回転/ズーム（200³以下フル品質、超過は軽量化） | 簡易モードへフォールバック |
| ダウンロード | ボタン押下 | エディション/バージョン選択（1.12〜最新） | ファイル取得 | 指定バージョン未対応エラー |
| いいね | ハートアイコン | - | カウント増加 | 未登録→登録誘導 |
| コメント | テキスト入力 | 1000文字以内 | コメント表示 | スパム/不適切検出→投稿不可 |
| コメント返信 | 返信ボタン→入力 | 1000文字以内 | スレッド形式で表示 | 同上 |
| アカウント登録 | メール入力 | 登録フォーム | アカウント作成 | 重複メールエラー |
| 検索 | キーワード/フィルタ | 検索バー+条件 | 結果一覧 | 0件時はおすすめ表示 |
| 公開設定 | 選択 | 公開/非公開/限定公開 | 設定反映 | - |
| 限定公開期限 | 選択 | 無期限/1日/1週間/1ヶ月/カスタム | URL発行 | 期限切れ→アクセス不可 |
| 通報 | 通報ボタン | 理由選択+自由記述 | 運営に送信 | - |

### Should（できれば）

| 機能 | ユーザー操作 | 画面/入力 | 結果 |
|------|-------------|-----------|------|
| フォロー | フォローボタン | プロフィールページ | フォロー中に追加 |
| 通知 | - | 通知一覧 | いいね/コメント/返信/フォロー/新着を表示 |
| タグ | タグ入力 | 投稿フォーム（10個まで） | 検索・フィルタ対象に |
| DL数表示 | - | 投稿ページ | 人気指標として表示 |
| リソパ適用 | ファイル/URL指定 | プレビュー設定 | バニラブロックのテクスチャ変更 |
| 電話認証 | 電話番号入力+SMS | 設定ページ | 「認証済み」バッジ付与 |
| SNS連携 | X/Instagram連携 | 設定ページ | 連携バッジ付与 |
| 埋め込み | コード取得 | 共有メニュー | 外部サイトに3Dプレビュー埋め込み |
| 前提MOD記述 | MOD名入力 | 投稿フォーム | 投稿ページに表示 |
| 代表作ピン留め | 投稿選択 | プロフィール設定（最大3つ） | プロフィール上部に表示 |

### Could（将来検討）

| 機能 | 説明 |
|------|------|
| コレクション | 建築をフォルダ分け保存 |
| ランキング | 週間/月間人気ランキング |
| API公開 | 外部ツールから検索・取得 |

---

## 6. 権限とアカウント

### アカウントレベル

| レベル | 条件 | バッジ表示 |
|--------|------|-----------|
| 未登録 | - | なし |
| メール登録済み | メール認証完了 | なし |
| 電話認証済み | 電話番号SMS認証完了 | ✓認証済み |
| SNS連携済み | X or Instagram連携 | Xバッジ or Instagramバッジ |

### 権限マトリクス

| 操作 | 未登録 | メール登録 | 電話認証 | SNS連携 |
|------|--------|-----------|----------|---------|
| 閲覧・検索 | ○ | ○ | ○ | ○ |
| 3Dプレビュー操作 | ○ | ○ | ○ | ○ |
| ダウンロード | × | ○ | ○ | ○ |
| いいね | × | ○ | ○ | ○ |
| コメント・返信 | × | ○ | ○ | ○ |
| アップロード | × | ○ | ○ | ○ |
| フォロー | × | ○ | ○ | ○ |
| 認証済みバッジ | - | × | ○ | ○ |
| SNSバッジ | - | × | × | ○ |

### 投稿に対する権限

| 状態 | できること |
|------|-----------|
| 自分の投稿 | 閲覧、編集、削除、公開設定変更、代表作設定 |
| 他人の公開投稿 | 閲覧、いいね、コメント、ダウンロード、通報 |
| 他人の限定公開投稿 | URL知っていれば閲覧・DL・いいね・コメント可 |
| 他人の非公開投稿 | アクセス不可 |

---

## 7. 通知・履歴・検索

### 通知（ログインユーザー向け）
- いいねされた
- コメントされた
- 自分のコメントに返信があった
- フォローされた
- フォロー中のユーザーが新規投稿

### 履歴
- ダウンロード履歴（自分がDLしたもの）
- いいね履歴

### 検索・フィルタ

| フィルタ項目 | 選択肢 |
|-------------|--------|
| キーワード | タイトル/説明/タグを検索 |
| エディション | Java版 / 統合版 / 両対応 |
| バージョン | 1.12〜最新（複数選択可） |
| サイズ | 小(〜50³) / 中(〜100³) / 大(〜200³) / 特大(200³超) |
| 投稿日 | 24時間以内 / 1週間以内 / 1ヶ月以内 / すべて |
| ソート | 人気順 / 新着順 / DL数順 |
| 前提MOD | あり / なし |

---

## 8. エラーハンドリング方針

| 状況 | ユーザーへのメッセージ |
|------|----------------------|
| ファイル非対応 | 「対応形式は .schematic / .litematic / .mcstructure です」 |
| ファイルサイズ超過 | 「ファイルサイズが上限（100MB）を超えています」 |
| 変換不完全 | 「一部ブロックが変換できませんでした（空気ブロックに置換されます）」＋置き換えリスト |
| MODブロック検出 | 「MODブロックが含まれています。前提MOD名を入力してください」 |
| レンダリング重い | 「簡易表示モードに切り替えますか？」 |
| 通信エラー | 「接続できませんでした。再試行してください」 |
| 未登録で操作 | 「この操作にはアカウント登録が必要です」＋登録ボタン |
| 不適切コンテンツ | 「このコメントは投稿できません」（詳細理由は出さない） |
| スパム検出 | 「投稿間隔が短すぎます。しばらくお待ちください」 |
| 限定公開URL期限切れ | 「このリンクは有効期限が切れています」 |
| 限定公開URL無効 | 「この投稿は存在しないか、アクセス権がありません」 |
| バージョン未対応 | 「このバージョン（○○）向けの変換はまだ対応していません」 |

---

## 9. 非機能要件（ユーザー体感）

| 項目 | 要件 |
|------|------|
| レンダリング性能 | スマホで200×200×200ブロックがスムーズに回転（目標: 30fps以上） |
| 大規模建築対応 | 200³超は軽量化レベルを自動適用し、可能な限り表示 |
| ページ読み込み | 3秒以内に操作可能状態 |
| 対応端末 | PC（Chrome/Firefox/Edge/Safari）、スマホ（iOS Safari/Android Chrome） |
| 可用性 | 99%稼働（計画メンテナンス除く） |
| 対応マイクラバージョン | 1.12〜最新（随時追加） |

---

## 10. 用語集

| 用語 | 意味 |
|------|------|
| 統合版 / Bedrock | Windows 10/11, スマホ, Switch, Xbox, PS 向けマイクラ |
| Java版 | PC向けのオリジナル版マイクラ |
| .schematic | 古い建築保存形式（MCEdit等） |
| .litematic | Litematica Modで使う建築形式 |
| .mcstructure | 統合版の構造物形式 |
| エディション | Java版 or 統合版の区別 |
| バージョン | 1.20.4 等のゲームバージョン |
| リソースパック / リソパ | テクスチャ等を変更するパック |
| 前提MOD | その建築を正しく表示するのに必要なMOD |
| 認証済みユーザー | 電話番号認証を完了したユーザー |
| 限定公開 | URLを知っている人だけがアクセスできる状態 |
| 代表作 | 投稿者がプロフィールにピン留めした作品（最大3つ） |
| 空気ブロック化 | 変換できないブロックを空気（透明）に置き換えること |

---

## 11. スコープ外（やらないこと）

- ワールドデータ丸ごとの共有（構造物ファイルのみ対応）
- MODブロックの変換（前提MOD名記述のみ）
- リアルタイム共同編集
- ゲーム内からの直接アップロード/ダウンロード
- オフライン閲覧（PWA等）
- 課金・収益化機能（初期リリースでは）
- 1.11以前のバージョン対応

---

## 12. Assumptions（前提条件）

- 変換で対応できないブロックは空気ブロック化する
- リソパ適用はバニラブロックのみ対象。MODブロックはデフォルト表示
- 限定公開URLは推測困難なランダム文字列
- スパム判定は「短時間での連続投稿」を基準とする
- 200³超の建築は自動で軽量化レベルを適用してレンダリング
- 返信が付いたコメントを削除しても、返信は「削除されたコメントへの返信」として残る
